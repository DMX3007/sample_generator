"use strict";(self.webpackChunkamo_websocket_app=self.webpackChunkamo_websocket_app||[]).push([[272],{272:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createWSSClient=void 0,o.createWSSClient=({room:e,appId:o,key:n,onMessage:s})=>new Promise((function(t,a){const c=()=>{const r=[`room=${e}`,`appId=${o}`,`key=${n}`].join("&"),i=new WebSocket("wss://amo-apps-websocket.services.mobilon.ru?"+r);i.onopen=()=>{console.log("Connected to the server"),t({send:p})},i.onmessage=e=>{console.log(`Received message from server, ${e.data}`),s(e.data)},i.onerror=function(e){a(e)},i.onclose=function(){setTimeout((function(){c()}),1e3)};const p=e=>{i.readyState&&i.send(JSON.stringify(e))};setInterval((()=>{p({ping:1})}),1e3)};c()}))}}]);